import{a as K,d as X}from"./state.svelte.-U_I4_bt.js";import{p as $,f as Z,a as ee,s as a,c as r,g as P,V as te,r as t,Y as J,t as H,Z as re,a3 as Q}from"./runtime.CYit1XUc.js";import{d as ae,s as z}from"./render.aTeX8JzN.js";import{c as oe,a as _,f as T}from"./template.SCQyI-TZ.js";import{i as G}from"./if.zup8iecP.js";import{e as se}from"./each.jY9LpBIB.js";import{s as W}from"./attributes.BRr-_xNB.js";import{t as j,f as le,b as Y}from"./index.B_ZpYVau.js";import{u as I}from"./updateCart.uhRd03c2.js";import"./shared.CmmqSMWe.js";function ie(s){const e=s.replace(/[^0-9.-]+/g,""),n=parseFloat(e);if(isNaN(n))throw new Error("Invalid currency format");return n}const de=(s,e=Q,n=Q)=>{var x=ve(),b=r(x),f=a(b,2),h=r(f),L=r(h,!0);t(h);var q=a(h,2),l=r(q,!0);t(q);var m=a(q,2),g=r(m),k=r(g);k.__click=[ne,e];var E=a(k,2),S=r(E,!0);t(E);var V=a(E,2);V.__click=[ce,e],t(g);var c=a(g,2);c.__click=[ue,e],t(m),t(f),t(x),H(()=>{W(b,"src",e().imageUrl),W(b,"alt",e().name),z(L,e().name),z(l,e().price),z(S,e().quantity)}),_(s,x)};var ne=(s,e)=>{I(e(),--e().quantity)},ce=(s,e)=>{I(e(),++e().quantity)},ue=(s,e)=>{I(e(),0)},ve=T('<li class="p-4 border-b flex items-start gap-3"><img class="w-12 h-12 object-cover rounded"/> <div class="flex-1"><p class="font-medium"> </p> <p class="text-sm text-gray-500 dark:text-gray-200 mb-2"> </p> <div class="flex items-center justify-between"><div class="flex items-center gap-2"><button class="w-6 h-6 bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 cursor-pointer rounded-full flex items-center justify-center hover:bg-gray-300">-</button> <span class="text-sm font-medium w-8 text-center"> </span> <button class="w-6 h-6 bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 cursor-pointer rounded-full flex items-center justify-center hover:bg-gray-300">+</button></div> <button class="cursor-pointer dark:text-red-400 dark:hover:text-red-500 text-red-500 hover:text-red-700 text-sm">Remove</button></div></div></li>'),be=T('<p class="p-4 text-gray-500 dark:text-gray-300">Your cart is empty.</p>'),fe=(s,e)=>J(e,!0),me=T('<div class="flex-1"><ul class="overflow-y-auto"></ul></div> <div class="p-4 border-t"><p class="font-semibold text-lg"> </p> <button class="mt-3 w-full bg-orange-500 text-white py-2 rounded hover:bg-orange-600">Checkout</button></div>',1),ge=T('<div class="absolute h-full w-full flex flex-col"><div class="p-4 border-b flex justify-between items-center"><h2 class="text-lg font-semibold">Your Orders</h2> <button class="text-gray-500 cursor-pointer hover:text-black dark:text-gray-300 dark:hover:text-white">✕</button></div> <!></div>'),pe=(s,e)=>J(e,!1),_e=T('<div class="absolute h-full w-full flex flex-col"><div class="p-4 border-b flex justify-between items-center"><h2 class="text-lg font-semibold">Checkout</h2> <button class="text-gray-500 text-xl cursor-pointer hover:text-black dark:text-gray-300 dark:hover:text-orange-400">←</button></div> <form class="p-4 flex-1 flex flex-col space-y-4"><div><label for="name" class="block text-sm font-medium mb-1">Name</label> <input id="name" name="name" type="text" class="w-full p-2 border rounded dark:bg-gray-800 dark:border-gray-700"/></div> <div><label for="phone" class="block text-sm font-medium mb-1">Phone</label> <input id="phone" name="phone" type="tel" pattern="[0-9]*" inputmode="numeric" class="w-full p-2 border rounded dark:bg-gray-800 dark:border-gray-700"/></div> <div><label for="address" class="block text-sm font-medium mb-1">Address</label> <textarea id="address" name="address" class="w-full p-2 border rounded dark:bg-gray-800 dark:border-gray-700" rows="3"></textarea></div> <div class="border-t pt-4 mt-auto"><p class="font-semibold text-lg mb-4"> </p> <button type="submit" class="w-full bg-orange-500 text-white py-2 rounded hover:bg-orange-600">Place Order</button></div></form></div>'),xe=T('<button class="fixed inset-0 z-40 bg-black/80" aria-label="Close Cart Modal Button"></button> <aside class="fixed top-0 right-0 w-80 h-full overflow-x-hidden bg-white dark:bg-gray-900 dark:text-gray-100 shadow-lg z-50"><!></aside>',1);function De(s,e){$(e,!0);let n=K().items,x=re(()=>n.reduce((l,m)=>l+ie(m.price),0));function b(){X(l=>({...l,isOpen:!1}))}let f=te(!1);var h=oe(),L=Z(h);{var q=l=>{var m=xe(),g=Z(m);g.__click=b;var k=a(g,2),E=r(k);{var S=c=>{var i=ge(),u=r(i),A=a(r(u),2);A.__click=b,t(u);var B=a(u,2);{var N=d=>{var v=be();_(d,v)},M=d=>{var v=me(),y=Z(v),F=r(y);se(F,23,()=>n,D=>D.name,(D,R,U)=>{de(D,()=>P(R),()=>P(U))}),t(F),t(y);var p=a(y,2),o=r(p),w=r(o);t(o);var O=a(o,2);O.__click=[fe,f],t(p),H(()=>z(w,`Total: ₹${P(x)??""}`)),j(3,y,()=>Y,()=>({x:-320,duration:300})),_(d,v)};G(B,d=>{n.length===0?d(N):d(M,!1)})}t(i),j(3,u,()=>Y,()=>({x:320,duration:300})),j(3,i,()=>Y,()=>({x:-320,duration:300})),_(c,i)},V=c=>{var i=_e(),u=r(i),A=a(r(u),2);A.__click=[pe,f],t(u);var B=a(u,2),N=a(r(B),2),M=a(r(N),2);M.__input=p=>{const o=p.target;o.value=o.value.replace(/[^0-9]/g,"").slice(0,14)},t(N);var d=a(N,4),v=r(d),y=r(v);t(v);var F=a(v,2);F.__click=p=>{p.preventDefault();const o=p.target,w=o.closest("form"),O=new FormData(w),D=O.get("name"),R=O.get("phone"),U=O.get("address");if(!D?.trim()||!R?.trim()||!U?.trim()){const C=document.createElement("div");C.className="error-message bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-600 text-red-700 dark:text-white px-4 py-3 rounded mb-4",C.textContent="Please fill in all required fields",w.querySelector(".error-message")||w.insertBefore(C,w.firstChild),setTimeout(()=>C.remove(),3e3);return}o.innerText="Order Placed!",o.disabled=!0,o.classList.add("text-orange-500","font-semibold"),o.classList.remove("text-white","bg-orange-500","hover:bg-orange-600"),setTimeout(()=>{b(),n.forEach(C=>{I(C,0)}),J(f,!1)},1e3)},t(d),t(B),t(i),H(()=>z(y,`Total: ₹${P(x)??""}`)),j(3,i,()=>Y,()=>({x:320,duration:300})),_(c,i)};G(E,c=>{P(f)?c(V,!1):c(S)})}t(k),j(3,g,()=>le,()=>({duration:100})),j(3,k,()=>Y,()=>({x:320,duration:300})),_(l,m)};G(L,l=>{K().isOpen&&l(q)})}_(s,h),ee()}ae(["click","input"]);export{De as default};
