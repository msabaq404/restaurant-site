import{s as f,b as p}from"./state.svelte.-U_I4_bt.js";import{p as b,V as a,W as v,X as c,Y as g,g as o,a as m,Z as y}from"./runtime.CYit1XUc.js";function w(M,d){b(d,!0);let r=null,u=y(p),i=a(null),n=a(v(new Map));c(()=>{let e=new Map;console.log("setting ids",o(n).size,o(n));for(const[t,s]of o(n))e.set(t.id,s.isIntersecting);console.log("ids",e),f(e)}),g(i,new IntersectionObserver(e=>{for(const s of e)o(n).set(s.target,s);g(n,new Map(o(n)),!0);let t;for(const s of o(n))if(t=s[1].isIntersecting?s[1]:t,!s[1].isIntersecting&&t){r=t;break}},{root:null,rootMargin:"-80px"}),!0),c(()=>{o(u);const e=r?.target,t=r?.target.getBoundingClientRect().top;requestAnimationFrame(()=>{e&&t&&scrollTo({top:scrollY+e.getBoundingClientRect().top-t})})});const l=document.querySelectorAll("astro-island > section");console.log(`Observer: Found ${l.length} elements to observe.`),l.length>0?l.forEach(e=>{o(i).observe(e)}):console.warn("Observer: No 'astro-island' elements found to observe."),m()}export{w as default};
